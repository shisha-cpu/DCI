'use client'

import { useState , useEffect } from 'react'
import Link from 'next/link'
import styles from './Navbar.module.css'

export default function Navbar() {


  const [hoveredCategory, setHoveredCategory] = useState<string | null>(null)
  const [isScrolled, setIsScrolled] = useState(false)

  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 0)
    }
    window.addEventListener('scroll', handleScroll)
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  const categories = {
    'Готовый арендный бизнес (ГАБ)': [
      'Продажа готового бизнеса',
      'Торгово-развлекательные центры',
      'Торговые центры',
      'Рынки | оптовые базы',
      'Складские комплексы',
      'Складские помещения',
      'Офисные центры (здания)',
      'Офисные помещения',
      'Коммерческая зарубежная недвижимость',
      'Торговые площади',
      'Гостиничный бизнес',
      'Отели | апартаменты | хостелы',
      'Базы отдыха',
      'Рестораны | бары | кофе',
      'Сфера красоты',
      'Бизнес в сфере услуг',
      'Арендный бизнес',
      'Готовый бизнес под ключ',
      'Медицинские центры',
      'Учреждения для детей',
      'Помещения свободного назначения',
      'Здания свободного назначения',
      'Автосалоны | автосервисы',
      'Автозаправки (АЗС)',
      'Прочее'
    ],
    'Жилая недвижимость': [
      'Квартиры в элитных ЖК',
      'Квартиры в новостройках',
      'Квартиры вторичка',
      'Жилые помещения',
      'Апартаменты',
      'Таунхаусы',
      'Коттеджи',
      'Загородные дома',
      'Элитные особняки',
      'Элитная зарубежная недвижимость',
      'Многоквартирные жилые комплексы',
      'Прочее'
    ],
    'Земельные участки': [
      'Земля под ИЖС',
      'Земля ЛПХ',
      'Земля под коммерческую застройку',
      'Промышленная земля',
      'Земля сельскохозяйственного назначения',
      'Земля для ведения садоводства или огородничества',
      'Прочее'
    ],
    'Производство': [
      'Деревообрабатывающие предприятия',
      'Металлообрабатывающие предприятия',
      'Производство строительных материалов',
      'Текстильное производство',
      'Пищевое производство',
      'Химическое производство',
      'Заводы',
      'Фабрики',
      'Прочее'
    ],
    'Агро бизнес': [
      'Птицефабрика',
      'Животноводческий комплекс',
      'Тепличный комплекс',
      'Зерновое хозяйство',
      'Элеватор',
      'Маслозаводы',
      'Молокозаводы',
      'Сады | виноградники',
      'Прочее'
    ],
    'Банковские услуги': [
      'Кредиты для бизнеса',
      'Кредиты под залог',
      'Кредит наличными',
      'Ипотечные программы',
      'Лизинг для юридических лиц',
      'Банковские гарантии',
      'Рефинансирование кредита',
      'Автокредиты',
      'Проектное финансирование',
      'РКО для бизнеса',
      'Зарплатные проекты',
      'Комплекс проверок вашей КИ',
      'Исправление кредитной истории',
      'Оценка имущества',
      'Прочее'
    ],
    'Сферы услуг': [
      'Строительство и ремонт',
      'Бухгалтерские услуги',
      'Привлечение инвестиций',
      'Юридическое сопровождение сделок',
      'Списание долгов для юридических лиц',
      'Списание долгов для физических лиц',
      'Исправление кредитной истории',
      'Проверка кредитной истории',
      'Оценка имущества',
      'Проверка юридических лиц',
      'Проверка объектов недвижимости на залоги и обременения',
      'Комплектация объектов и гостиничных номеров',
      'Прочее'
    ],
    'Инвестиции': [
      'Управление крупным и частным капиталом',
      'Инвестиции'
    ],
    'Для состоятельных клиентов': [
      'Аренда бизнес Джетов',
      'Аренда вертолетов',
      'Аренда яхт',
      'Прочее'
    ],
    'Реабилитация компаний': [
      'Разблокировка 115 ФЗ',
      'Профилактика блокировок по 115 ФЗ',
      'Анализ бизнеса + абонентское обслуживание',
      'Проверка контрагентов для исключения из цепочки',
      'Рекомендации по налоговому сектору',
      'Прочее'
    ]
  };

  const formatSlug = (text: string) =>
    encodeURIComponent(text.toLowerCase().replace(/\s+/g, '-'))

  return (
    <nav className={styles.navbar}>
      <div className={styles.fullWidthContainer}>
        <div className={styles.contentContainer}>
          <ul className={styles.mainMenu}>
            {Object.keys(categories).map((category) => (
              <li
                key={category}
                className={styles.menuItem}
                onMouseEnter={() => setHoveredCategory(category)}
                onMouseLeave={() => setHoveredCategory(null)}
              >
                <span className={styles.menuLink}>
                  {category}
                  <span className={styles.menuIcon}>⌄</span>
                </span>

                {hoveredCategory === category && (
                  <div className={styles.submenu}>
                    <div className={styles.submenuInner}>
                      {categories[category].map((subcategory) => (
                        <Link
                          key={subcategory}
                          href={`/category/${formatSlug(category)}?subcategory=${formatSlug(subcategory)}`}
                          className={styles.submenuLink}
                        >
                          <span className={styles.submenuIcon}>→</span>
                          {subcategory}
                        </Link>
                      ))}
                    </div>
                  </div>
                )}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </nav>
  )
}